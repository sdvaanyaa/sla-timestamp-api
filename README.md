# ‚è±Ô∏è SLA Timestamp API

## –û–ø–∏—Å–∞–Ω–∏–µ
–≠—Ç–æ REST API-—Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏ SLA (Service Level Agreement). –°–µ—Ä–≤–∏—Å –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å, –ø–æ–ª—É—á–∞—Ç—å, –ø–µ—Ä–µ—á–∏—Å–ª—è—Ç—å –∏ —É–¥–∞–ª—è—Ç—å –∑–∞–ø–∏—Å–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫ —Å–æ–±—ã—Ç–∏–π, —Ç–∞–∫–∏—Ö –∫–∞–∫ –∏–Ω—Ü–∏–¥–µ–Ω—Ç—ã, —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∏ —Ç.–¥. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è PostgreSQL –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è, Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ RabbitMQ –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫—ç—à–∞ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–π —á—Ç–µ–Ω–∏—è.

## –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- **–°–æ–∑–¥–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫ —Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ –ø–æ–ª—è–º–∏ (external_id, timestamp, tag, stage) –∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º meta.**
- **–ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç–∫–∏ –ø–æ ID.**
- **–ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ –º–µ—Ç–æ–∫ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ (external_id, tag, stage, –¥–∏–∞–ø–∞–∑–æ–Ω timestamp, meta).** 
- **–£–¥–∞–ª–µ–Ω–∏–µ –º–µ—Ç–∫–∏ –ø–æ ID.**
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —á—Ç–µ–Ω–∏—è.** 
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞ —á–µ—Ä–µ–∑ RabbitMQ.** 
- **–í–∞–ª–∏–¥–∞—Ü–∏—è, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫.** 
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API —Å –ø–æ–º–æ—â—å—é Swagger.** 
- **–ú–∏–≥—Ä–∞—Ü–∏–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Goose.** 
- **–ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏.**

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- Go 1.21+
- HTTP Framework: Fiber
- Database: PostgreSQL (–±–µ–∑ ORM, —á–∏—Å—Ç—ã–π SQL)
- Cache: Redis
- Broker: RabbitMQ
- Validation: go-playground/validator
- Logging: slog
- Migrations: Goose
- Tests: minimock, testify

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
  ```bash
    git clone https://github.com/sdvaanyaa/sla-timestamp-api.git
    cd sla-timestamp-api
    cp .env.example .env
  ```
2. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ –º–æ–∫–æ–≤**
- Swagger
  ```bash
  make swagger
  ```
  
- Mocks
  ```bash
  make mocks
  ```
  
3. **–ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ API-—Å–µ—Ä–≤–∏—Å–∞ (–ø–æ–¥–Ω–∏–º–∞–µ—Ç Docker, –ø—Ä–æ–≥–æ–Ω—è–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏, –ª–∏–Ω—Ç–µ—Ä –∏ –±–∏–ª–¥–∏—Ç –ø—Ä–æ–µ–∫—Ç)**
  ```bash
  make run
  ```

4. **–ó–∞–ø—É—Å–∫ consumer-–ø—Ä–æ—Ü–µ—Å—Å–∞ (–¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫—ç—à–∞)**
  ```bash
  make run-consumer
  ```

## –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

- üåê **API**: [http://localhost:8080](http://localhost:8080)
- üìÑ **Swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: [http://localhost:8080/swagger/index.html](http://localhost:8080/swagger/index.html)
- üê∞ **RabbitMQ UI**: [http://localhost:15672](http://localhost:15672) (–ª–æ–≥–∏–Ω: `guest`, –ø–∞—Ä–æ–ª—å: `guest`)


## –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
![–°—Ö–µ–º–∞ –ë–î](png/schema_db.png)

## –°—Ö–µ–º–∞ –º–∏–≥—Ä–∞—Ü–∏–∏
![–°—Ö–µ–º–∞ –º–∏–≥—Ä–∞—Ü–∏–∏](png/migrations.png)
